
grafana:
  enabled: true
  grafana.ini:
    server:
      root_url: "%(protocol)s://%(domain)s:%(http_port)s/grafana/"
      serve_from_sub_path: true
  ingress:
    enabled: true
    ingressClassName: nginx 
    path: /grafana
    pathType: Prefix

--
prometheus:
  prometheusSpec:
    replicas: 1
    scrapeInterval: "30s"
    retention: "10d"
    retentionSize: "4GB"
    externalUrl: "/prometheus"
    routePrefix: "/"          
    podMetadata: 
      labels:
        app: prometheus
        k8s-app: prometheus
    persistentVolumeClaimRetentionPolicy: 
      whenDeleted: Retain
      whenScaled: Retain
    storageSpec: 
      volumeClaimTemplate:
        spec:
          storageClassName: "local-path"
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: "500Mi"
    thanos: {}

  ingress:
    enabled: true
    ingressClassName: nginx
    paths:
      - /prometheus
    pathType: Prefix

 
  thanosService:
    enabled: true
  thanosServiceMonitor:
    enabled: true


alertmanager:
  alertmanagerSpec:
    externalUrl: "/alertmanager" 
    persistentVolumeClaimRetentionPolicy: 
      whenDeleted: Retain
      whenScaled: Retain
    storage:
      volumeClaimTemplate:
        spec:
          storageClassName: "local-path"
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: "500Mi"
  ingress:
    enabled: true
    ingressClassName: nginx
    paths:
      - /alertmanager
    pathType: Prefix

prometheusOperator:
  thanosImage:
    registry: quay.io
    repository: thanos/thanos
    tag: v0.39.2



prometheus:

  prometheusSpec:
    replicas: 1
    scrapeInterval: "30s"
    retention: "10d"
    retentionSize: "4GB"
    podMetadata: 
      labels:
        app: prometheus
        k8s-app: prometheus
    persistentVolumeClaimRetentionPolicy: 
     whenDeleted: Retain
     whenScaled: Retain
    storageSpec: 
      # Using PersistentVolumeClaim
      volumeClaimTemplate:
        spec:
          storageClassName: "local-path"
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: "500Mi"
    # thanos sidecar s3 secret
    thanos: {}
      # ObjectStorageConfig configures object storage in Thanos.
      # objectStorageConfig:
      #   secret: 
          # type: S3
          # config:
          #   bucket: ""
          #   endpoint: ""
          #   region: ""
          #   access_key: ""
          #   secret_key: ""

  # Service for thanos service discovery on sidecar
  # Enable this can make Thanos Query can use
  # `--store=dnssrv+_grpc._tcp.${kube-prometheus-stack.fullname}-thanos-discovery.${namespace}.svc.cluster.local` to discovery
  # Thanos sidecar on prometheus nodes
  # (Please remember to change ${kube-prometheus-stack.fullname} and ${namespace}. Not just copy and paste!)
  thanosService:
    enabled: true

  # ServiceMonitor to scrape Sidecar metrics
  # Needs thanosService to be enabled as well
  thanosServiceMonitor:
    enabled: true
    # interval: ""

alertmanager:
  alertmanagerSpec:
    persistentVolumeClaimRetentionPolicy: 
      whenDeleted: Retain
      whenScaled: Retain
    storage:
      volumeClaimTemplate:
        spec:
          storageClassName: "local-path"
          accessModes: ["ReadWriteOnce"]
          resources:
            requests:
              storage: "500Mi"


prometheusOperator:
  ## Thanos side-car image when configured
  thanosImage:
    registry: quay.io
    repository: thanos/thanos

    tag: v0.39.2




